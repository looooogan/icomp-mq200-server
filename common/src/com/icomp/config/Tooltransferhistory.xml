<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document : Tooltransferhistory.xml
    Created on : 2014/11/12 18:19:04
    Author : 工具自动生成
    Description: 工具自动生成包含刀具流转履历的单表增删改查SQL语句.
    searchByPrimaryKey ： 主键查询
    searchByList ： 任意条件查询
    searchByCount ：任意条件条数查询
    insert ： 插入处理
    update ： 更新处理（未指定项目更新为null）
    updateNonQuery ：更新处理（未指定项目不更新）
    delete ： 删除处理
-->

<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Tooltransferhistory">
    <typeAlias alias="entityTooltransferhistory" type="com.icomp.entity.base.Tooltransferhistory"/>
    <resultMap id="Tooltransferhistory-map" class="entityTooltransferhistory">
        <!--  -->
        <result property="toolTransferHistoryID" column="ToolTransferHistoryID"/>
        <!-- RFID载体ID -->
        <result property="rfidContainerID" column="RfidContainerID"/>
        <!-- 刀具入库编码 -->
        <result property="knifeInventoryCode" column="KnifeInventoryCode"/>
        <!-- 刀具ID -->
        <result property="toolID" column="ToolID"/>
        <!-- 采购ID -->
        <result property="toolProcuredID" column="ToolProcuredID"/>
        <!-- 最后执行业务流程 -->
        <result property="businessFlowLnkID" column="BusinessFlowLnkID"/>
        <!-- 耐用度 -->
        <result property="toolDurable" column="ToolDurable"/>
        <!-- 可使用(刃磨)次数 -->
        <result property="toolSharpennum" column="ToolSharpennum"/>
        <!-- 复磨标准 -->
        <result property="toolSharpenCriterion" column="ToolSharpenCriterion"/>
        <!-- 刀具长度 -->
        <result property="toolLength" column="ToolLength"/>
        <!-- 可刃磨长度 -->
        <result property="toolSharpenLength" column="ToolSharpenLength"/>
        <!-- 已使用(刃磨)次数[当使用次数等于可复用次数时刀具报废] -->
        <result property="usageCounter" column="UsageCounter"/>
        <!-- 刀具已刃磨长度 -->
        <result property="toolGrindingLength" column="ToolGrindingLength"/>
        <!-- 刀具安装合成刀状态(0未安装1已安装2卸下9其他) -->
        <result property="installationState" column="InstallationState"/>
        <!-- 刀具状态(0断刀1丢失2不合格3借入4申领9其他) -->
        <result property="toolState" column="ToolState"/>
        <!-- 申领区分(0扩能1外借2工艺试验) -->
        <result property="replacementFlag" column="ReplacementFlag"/>
        <!-- 转出人 -->
        <result property="outUser" column="outUser"/>
        <!-- 接收人 -->
        <result property="inUser" column="inUser"/>
        <!-- 确认人(断刀、丢失、不合格的状态选择时需要上级确认) -->
        <result property="confirmedUser" column="ConfirmedUser"/>
        <!-- 库存状态(0正常1报废2返厂3封存9其他) -->
        <result property="stockState" column="StockState"/>
        <!-- 删除区分(0有效1删除) -->
        <result property="delFlag" column="DelFlag"/>
        <!-- 更新时间 -->
        <result property="updateTime" column="UpdateTime"/>
        <!-- 更新者 -->
        <result property="updateUser" column="UpdateUser"/>
        <!-- 创建时间 -->
        <result property="createTime" column="CreateTime"/>
        <!-- 创建者 -->
        <result property="createUser" column="CreateUser"/>
        <!-- 版本号 -->
        <result property="version" column="Version"/>
    </resultMap>
    <!-- 主键查询执行 -->
    <select id="searchByPrimaryKey" parameterClass="entityTooltransferhistory" resultMap="Tooltransferhistory-map">
        SELECT
        ToolTransferHistoryID
        ,RfidContainerID
        ,KnifeInventoryCode
        ,ToolID
        ,ToolProcuredID
        ,BusinessFlowLnkID
        ,ToolDurable
        ,ToolSharpennum
        ,ToolSharpenCriterion
        ,ToolLength
        ,ToolSharpenLength
        ,UsageCounter
        ,ToolGrindingLength
        ,InstallationState
        ,ToolState
        ,ReplacementFlag
        ,outUser
        ,inUser
        ,ConfirmedUser
        ,StockState
        ,DelFlag
        ,UpdateTime
        ,UpdateUser
        ,CreateTime
        ,CreateUser
        ,Version
        from tooltransferhistory
        <dynamic prepend=" where ">
            <isNotNull property="toolTransferHistoryID" prepend="and ">
                ToolTransferHistoryID = #toolTransferHistoryID#
            </isNotNull>
        </dynamic>
        <isNotNull property="orderString">
            order by $orderString$
        </isNotNull>
        <isNull property="orderString">
            order by
            ToolTransferHistoryID
        </isNull>
        <isGreaterThan property="staIndex" compareValue="-1">
            LIMIT $rowCount$ offset $staIndex$
        </isGreaterThan>
    </select>

    <!-- 任意条件查询执行 -->
    <select id="searchByList" parameterClass="entityTooltransferhistory" resultMap="Tooltransferhistory-map">
        SELECT
        ToolTransferHistoryID
        ,RfidContainerID
        ,KnifeInventoryCode
        ,ToolID
        ,ToolProcuredID
        ,BusinessFlowLnkID
        ,ToolDurable
        ,ToolSharpennum
        ,ToolSharpenCriterion
        ,ToolLength
        ,ToolSharpenLength
        ,UsageCounter
        ,ToolGrindingLength
        ,InstallationState
        ,ToolState
        ,ReplacementFlag
        ,outUser
        ,inUser
        ,ConfirmedUser
        ,StockState
        ,DelFlag
        ,UpdateTime
        ,UpdateUser
        ,CreateTime
        ,CreateUser
        ,Version
        from tooltransferhistory
        <dynamic prepend=" where ">
            <isNotNull property="toolTransferHistoryID" prepend="and ">
                ToolTransferHistoryID = #toolTransferHistoryID#
            </isNotNull>
            <isNotNull property="rfidContainerID" prepend="and ">
                RfidContainerID = #rfidContainerID#
            </isNotNull>
            <isNotNull property="knifeInventoryCode" prepend="and ">
                KnifeInventoryCode = #knifeInventoryCode#
            </isNotNull>
            <isNotNull property="toolID" prepend="and ">
                ToolID = #toolID#
            </isNotNull>
            <isNotNull property="toolProcuredID" prepend="and ">
                ToolProcuredID = #toolProcuredID#
            </isNotNull>
            <isNotNull property="businessFlowLnkID" prepend="and ">
                BusinessFlowLnkID = #businessFlowLnkID#
            </isNotNull>
            <isNotNull property="toolDurable" prepend="and ">
                ToolDurable = #toolDurable#
            </isNotNull>
            <isNotNull property="toolSharpennum" prepend="and ">
                ToolSharpennum = #toolSharpennum#
            </isNotNull>
            <isNotNull property="toolSharpenCriterion" prepend="and ">
                ToolSharpenCriterion = #toolSharpenCriterion#
            </isNotNull>
            <isNotNull property="toolLength" prepend="and ">
                ToolLength = #toolLength#
            </isNotNull>
            <isNotNull property="toolSharpenLength" prepend="and ">
                ToolSharpenLength = #toolSharpenLength#
            </isNotNull>
            <isNotNull property="usageCounter" prepend="and ">
                UsageCounter = #usageCounter#
            </isNotNull>
            <isNotNull property="toolGrindingLength" prepend="and ">
                ToolGrindingLength = #toolGrindingLength#
            </isNotNull>
            <isNotNull property="installationState" prepend="and ">
                InstallationState = #installationState#
            </isNotNull>
            <isNotNull property="toolState" prepend="and ">
                ToolState = #toolState#
            </isNotNull>
            <isNotNull property="replacementFlag" prepend="and ">
                ReplacementFlag = #replacementFlag#
            </isNotNull>
            <isNotNull property="outUser" prepend="and ">
                outUser = #outUser#
            </isNotNull>
            <isNotNull property="inUser" prepend="and ">
                inUser = #inUser#
            </isNotNull>
            <isNotNull property="confirmedUser" prepend="and ">
                ConfirmedUser = #confirmedUser#
            </isNotNull>
            <isNotNull property="stockState" prepend="and ">
                StockState = #stockState#
            </isNotNull>
            <isNotNull property="delFlag" prepend="and ">
                DelFlag = #delFlag#
            </isNotNull>
            <isNotNull property="updateTime" prepend="and ">
                UpdateTime = #updateTime#
            </isNotNull>
            <isNotNull property="updateUser" prepend="and ">
                UpdateUser = #updateUser#
            </isNotNull>
            <isNotNull property="createTime" prepend="and ">
                CreateTime = #createTime#
            </isNotNull>
            <isNotNull property="createUser" prepend="and ">
                CreateUser = #createUser#
            </isNotNull>
            <isNotNull property="version" prepend="and ">
                Version = #version#
            </isNotNull>
        </dynamic>
        <isNotNull property="orderString">
            order by $orderString$
        </isNotNull>
        <isNull property="orderString">
            order by
            ToolTransferHistoryID
        </isNull>
        <isGreaterThan property="staIndex" compareValue="-1">
            LIMIT $rowCount$ offset $staIndex$
        </isGreaterThan>
    </select>

    <!-- 任意条件查询条数 -->
    <select id="searchByCount" parameterClass="entityTooltransferhistory" resultClass="int">
        SELECT count(1)
        from tooltransferhistory
        <dynamic prepend=" where ">
            <isNotNull property="toolTransferHistoryID" prepend="and ">
                ToolTransferHistoryID = #toolTransferHistoryID#
            </isNotNull>
            <isNotNull property="rfidContainerID" prepend="and ">
                RfidContainerID = #rfidContainerID#
            </isNotNull>
            <isNotNull property="knifeInventoryCode" prepend="and ">
                KnifeInventoryCode = #knifeInventoryCode#
            </isNotNull>
            <isNotNull property="toolID" prepend="and ">
                ToolID = #toolID#
            </isNotNull>
            <isNotNull property="toolProcuredID" prepend="and ">
                ToolProcuredID = #toolProcuredID#
            </isNotNull>
            <isNotNull property="businessFlowLnkID" prepend="and ">
                BusinessFlowLnkID = #businessFlowLnkID#
            </isNotNull>
            <isNotNull property="toolDurable" prepend="and ">
                ToolDurable = #toolDurable#
            </isNotNull>
            <isNotNull property="toolSharpennum" prepend="and ">
                ToolSharpennum = #toolSharpennum#
            </isNotNull>
            <isNotNull property="toolSharpenCriterion" prepend="and ">
                ToolSharpenCriterion = #toolSharpenCriterion#
            </isNotNull>
            <isNotNull property="toolLength" prepend="and ">
                ToolLength = #toolLength#
            </isNotNull>
            <isNotNull property="toolSharpenLength" prepend="and ">
                ToolSharpenLength = #toolSharpenLength#
            </isNotNull>
            <isNotNull property="usageCounter" prepend="and ">
                UsageCounter = #usageCounter#
            </isNotNull>
            <isNotNull property="toolGrindingLength" prepend="and ">
                ToolGrindingLength = #toolGrindingLength#
            </isNotNull>
            <isNotNull property="installationState" prepend="and ">
                InstallationState = #installationState#
            </isNotNull>
            <isNotNull property="toolState" prepend="and ">
                ToolState = #toolState#
            </isNotNull>
            <isNotNull property="replacementFlag" prepend="and ">
                ReplacementFlag = #replacementFlag#
            </isNotNull>
            <isNotNull property="outUser" prepend="and ">
                outUser = #outUser#
            </isNotNull>
            <isNotNull property="inUser" prepend="and ">
                inUser = #inUser#
            </isNotNull>
            <isNotNull property="confirmedUser" prepend="and ">
                ConfirmedUser = #confirmedUser#
            </isNotNull>
            <isNotNull property="stockState" prepend="and ">
                StockState = #stockState#
            </isNotNull>
            <isNotNull property="delFlag" prepend="and ">
                DelFlag = #delFlag#
            </isNotNull>
            <isNotNull property="updateTime" prepend="and ">
                UpdateTime = #updateTime#
            </isNotNull>
            <isNotNull property="updateUser" prepend="and ">
                UpdateUser = #updateUser#
            </isNotNull>
            <isNotNull property="createTime" prepend="and ">
                CreateTime = #createTime#
            </isNotNull>
            <isNotNull property="createUser" prepend="and ">
                CreateUser = #createUser#
            </isNotNull>
            <isNotNull property="version" prepend="and ">
                Version = #version#
            </isNotNull>
        </dynamic>
    </select>

    <!-- 任意条件更新处理(未指定字段更新为：null) -->
    <update id="update" parameterClass="entityTooltransferhistory">
        update tooltransferhistory
        <dynamic prepend="set">
            <isNotNull property="toolTransferHistoryID">
                ToolTransferHistoryID = #toolTransferHistoryID#
            </isNotNull>
            <isNull property="toolTransferHistoryID">
                ToolTransferHistoryID = null
            </isNull>
            <isNotNull property="rfidContainerID">
                ,RfidContainerID = #rfidContainerID#
            </isNotNull>
            <isNull property="rfidContainerID">
                ,RfidContainerID = null
            </isNull>
            <isNotNull property="knifeInventoryCode">
                ,KnifeInventoryCode = #knifeInventoryCode#
            </isNotNull>
            <isNull property="knifeInventoryCode">
                ,KnifeInventoryCode = null
            </isNull>
            <isNotNull property="toolID">
                ,ToolID = #toolID#
            </isNotNull>
            <isNull property="toolID">
                ,ToolID = null
            </isNull>
            <isNotNull property="toolProcuredID">
                ,ToolProcuredID = #toolProcuredID#
            </isNotNull>
            <isNull property="toolProcuredID">
                ,ToolProcuredID = null
            </isNull>
            <isNotNull property="businessFlowLnkID">
                ,BusinessFlowLnkID = #businessFlowLnkID#
            </isNotNull>
            <isNull property="businessFlowLnkID">
                ,BusinessFlowLnkID = null
            </isNull>
            <isNotNull property="toolDurable">
                ,ToolDurable = #toolDurable#
            </isNotNull>
            <isNull property="toolDurable">
                ,ToolDurable = null
            </isNull>
            <isNotNull property="toolSharpennum">
                ,ToolSharpennum = #toolSharpennum#
            </isNotNull>
            <isNull property="toolSharpennum">
                ,ToolSharpennum = null
            </isNull>
            <isNotNull property="toolSharpenCriterion">
                ,ToolSharpenCriterion = #toolSharpenCriterion#
            </isNotNull>
            <isNull property="toolSharpenCriterion">
                ,ToolSharpenCriterion = null
            </isNull>
            <isNotNull property="toolLength">
                ,ToolLength = #toolLength#
            </isNotNull>
            <isNull property="toolLength">
                ,ToolLength = null
            </isNull>
            <isNotNull property="toolSharpenLength">
                ,ToolSharpenLength = #toolSharpenLength#
            </isNotNull>
            <isNull property="toolSharpenLength">
                ,ToolSharpenLength = null
            </isNull>
            <isNotNull property="usageCounter">
                ,UsageCounter = #usageCounter#
            </isNotNull>
            <isNull property="usageCounter">
                ,UsageCounter = null
            </isNull>
            <isNotNull property="toolGrindingLength">
                ,ToolGrindingLength = #toolGrindingLength#
            </isNotNull>
            <isNull property="toolGrindingLength">
                ,ToolGrindingLength = null
            </isNull>
            <isNotNull property="installationState">
                ,InstallationState = #installationState#
            </isNotNull>
            <isNull property="installationState">
                ,InstallationState = null
            </isNull>
            <isNotNull property="toolState">
                ,ToolState = #toolState#
            </isNotNull>
            <isNull property="toolState">
                ,ToolState = null
            </isNull>
            <isNotNull property="replacementFlag">
                ,ReplacementFlag = #replacementFlag#
            </isNotNull>
            <isNull property="replacementFlag">
                ,ReplacementFlag = null
            </isNull>
            <isNotNull property="outUser">
                ,outUser = #outUser#
            </isNotNull>
            <isNull property="outUser">
                ,outUser = null
            </isNull>
            <isNotNull property="inUser">
                ,inUser = #inUser#
            </isNotNull>
            <isNull property="inUser">
                ,inUser = null
            </isNull>
            <isNotNull property="confirmedUser">
                ,ConfirmedUser = #confirmedUser#
            </isNotNull>
            <isNull property="confirmedUser">
                ,ConfirmedUser = null
            </isNull>
            <isNotNull property="stockState">
                ,StockState = #stockState#
            </isNotNull>
            <isNull property="stockState">
                ,StockState = null
            </isNull>
            <isNotNull property="delFlag">
                ,DelFlag = #delFlag#
            </isNotNull>
            <isNull property="delFlag">
                ,DelFlag = null
            </isNull>
            <isNotNull property="updateTime">
                ,UpdateTime = #updateTime#
            </isNotNull>
            <isNull property="updateTime">
                ,UpdateTime = null
            </isNull>
            <isNotNull property="updateUser">
                ,UpdateUser = #updateUser#
            </isNotNull>
            <isNull property="updateUser">
                ,UpdateUser = null
            </isNull>
            <isNotNull property="createTime">
                ,CreateTime = #createTime#
            </isNotNull>
            <isNull property="createTime">
                ,CreateTime = null
            </isNull>
            <isNotNull property="createUser">
                ,CreateUser = #createUser#
            </isNotNull>
            <isNull property="createUser">
                ,CreateUser = null
            </isNull>
            <isNotNull property="version">
                ,Version = #version#
            </isNotNull>
            <isNull property="version">
                ,Version = null
            </isNull>
        </dynamic>
        <dynamic prepend=" where ">
            <isNotNull property="toolTransferHistoryIDWhere" prepend="and ">
                ToolTransferHistoryID = #toolTransferHistoryIDWhere#
            </isNotNull>
            <isNotNull property="rfidContainerIDWhere" prepend="and ">
                RfidContainerID = #rfidContainerIDWhere#
            </isNotNull>
            <isNotNull property="knifeInventoryCodeWhere" prepend="and ">
                KnifeInventoryCode = #knifeInventoryCodeWhere#
            </isNotNull>
            <isNotNull property="toolIDWhere" prepend="and ">
                ToolID = #toolIDWhere#
            </isNotNull>
            <isNotNull property="toolProcuredIDWhere" prepend="and ">
                ToolProcuredID = #toolProcuredIDWhere#
            </isNotNull>
            <isNotNull property="businessFlowLnkIDWhere" prepend="and ">
                BusinessFlowLnkID = #businessFlowLnkIDWhere#
            </isNotNull>
            <isNotNull property="toolDurableWhere" prepend="and ">
                ToolDurable = #toolDurableWhere#
            </isNotNull>
            <isNotNull property="toolSharpennumWhere" prepend="and ">
                ToolSharpennum = #toolSharpennumWhere#
            </isNotNull>
            <isNotNull property="toolSharpenCriterionWhere" prepend="and ">
                ToolSharpenCriterion = #toolSharpenCriterionWhere#
            </isNotNull>
            <isNotNull property="toolLengthWhere" prepend="and ">
                ToolLength = #toolLengthWhere#
            </isNotNull>
            <isNotNull property="toolSharpenLengthWhere" prepend="and ">
                ToolSharpenLength = #toolSharpenLengthWhere#
            </isNotNull>
            <isNotNull property="usageCounterWhere" prepend="and ">
                UsageCounter = #usageCounterWhere#
            </isNotNull>
            <isNotNull property="toolGrindingLengthWhere" prepend="and ">
                ToolGrindingLength = #toolGrindingLengthWhere#
            </isNotNull>
            <isNotNull property="installationStateWhere" prepend="and ">
                InstallationState = #installationStateWhere#
            </isNotNull>
            <isNotNull property="toolStateWhere" prepend="and ">
                ToolState = #toolStateWhere#
            </isNotNull>
            <isNotNull property="replacementFlagWhere" prepend="and ">
                ReplacementFlag = #replacementFlagWhere#
            </isNotNull>
            <isNotNull property="outUserWhere" prepend="and ">
                outUser = #outUserWhere#
            </isNotNull>
            <isNotNull property="inUserWhere" prepend="and ">
                inUser = #inUserWhere#
            </isNotNull>
            <isNotNull property="confirmedUserWhere" prepend="and ">
                ConfirmedUser = #confirmedUserWhere#
            </isNotNull>
            <isNotNull property="stockStateWhere" prepend="and ">
                StockState = #stockStateWhere#
            </isNotNull>
            <isNotNull property="delFlagWhere" prepend="and ">
                DelFlag = #delFlagWhere#
            </isNotNull>
            <isNotNull property="updateTimeWhere" prepend="and ">
                UpdateTime = #updateTimeWhere#
            </isNotNull>
            <isNotNull property="updateUserWhere" prepend="and ">
                UpdateUser = #updateUserWhere#
            </isNotNull>
            <isNotNull property="createTimeWhere" prepend="and ">
                CreateTime = #createTimeWhere#
            </isNotNull>
            <isNotNull property="createUserWhere" prepend="and ">
                CreateUser = #createUserWhere#
            </isNotNull>
            <isNotNull property="versionWhere" prepend="and ">
                Version = #versionWhere#
            </isNotNull>
        </dynamic>
    </update>

    <!-- 任意条件更新处理(未指定字段不更新) -->
    <update id="updateNonQuery" parameterClass="entityTooltransferhistory">
        update tooltransferhistory
        <dynamic prepend="set">
            <isNotNull property="toolTransferHistoryID" prepend=",">
                ToolTransferHistoryID = #toolTransferHistoryID#
            </isNotNull>
            <isNotNull property="rfidContainerID" prepend=",">
                RfidContainerID = #rfidContainerID#
            </isNotNull>
            <isNotNull property="knifeInventoryCode" prepend=",">
                KnifeInventoryCode = #knifeInventoryCode#
            </isNotNull>
            <isNotNull property="toolID" prepend=",">
                ToolID = #toolID#
            </isNotNull>
            <isNotNull property="toolProcuredID" prepend=",">
                ToolProcuredID = #toolProcuredID#
            </isNotNull>
            <isNotNull property="businessFlowLnkID" prepend=",">
                BusinessFlowLnkID = #businessFlowLnkID#
            </isNotNull>
            <isNotNull property="toolDurable" prepend=",">
                ToolDurable = #toolDurable#
            </isNotNull>
            <isNotNull property="toolSharpennum" prepend=",">
                ToolSharpennum = #toolSharpennum#
            </isNotNull>
            <isNotNull property="toolSharpenCriterion" prepend=",">
                ToolSharpenCriterion = #toolSharpenCriterion#
            </isNotNull>
            <isNotNull property="toolLength" prepend=",">
                ToolLength = #toolLength#
            </isNotNull>
            <isNotNull property="toolSharpenLength" prepend=",">
                ToolSharpenLength = #toolSharpenLength#
            </isNotNull>
            <isNotNull property="usageCounter" prepend=",">
                UsageCounter = #usageCounter#
            </isNotNull>
            <isNotNull property="toolGrindingLength" prepend=",">
                ToolGrindingLength = #toolGrindingLength#
            </isNotNull>
            <isNotNull property="installationState" prepend=",">
                InstallationState = #installationState#
            </isNotNull>
            <isNotNull property="toolState" prepend=",">
                ToolState = #toolState#
            </isNotNull>
            <isNotNull property="replacementFlag" prepend=",">
                ReplacementFlag = #replacementFlag#
            </isNotNull>
            <isNotNull property="outUser" prepend=",">
                outUser = #outUser#
            </isNotNull>
            <isNotNull property="inUser" prepend=",">
                inUser = #inUser#
            </isNotNull>
            <isNotNull property="confirmedUser" prepend=",">
                ConfirmedUser = #confirmedUser#
            </isNotNull>
            <isNotNull property="stockState" prepend=",">
                StockState = #stockState#
            </isNotNull>
            <isNotNull property="delFlag" prepend=",">
                DelFlag = #delFlag#
            </isNotNull>
            <isNotNull property="updateTime" prepend=",">
                UpdateTime = #updateTime#
            </isNotNull>
            <isNotNull property="updateUser" prepend=",">
                UpdateUser = #updateUser#
            </isNotNull>
            <isNotNull property="createTime" prepend=",">
                CreateTime = #createTime#
            </isNotNull>
            <isNotNull property="createUser" prepend=",">
                CreateUser = #createUser#
            </isNotNull>
            <isNotNull property="version" prepend=",">
                Version = #version#
            </isNotNull>
        </dynamic>
        <dynamic prepend=" where ">
            <isNotNull property="toolTransferHistoryIDWhere" prepend="and ">
                ToolTransferHistoryID = #toolTransferHistoryIDWhere#
            </isNotNull>
            <isNotNull property="rfidContainerIDWhere" prepend="and ">
                RfidContainerID = #rfidContainerIDWhere#
            </isNotNull>
            <isNotNull property="knifeInventoryCodeWhere" prepend="and ">
                KnifeInventoryCode = #knifeInventoryCodeWhere#
            </isNotNull>
            <isNotNull property="toolIDWhere" prepend="and ">
                ToolID = #toolIDWhere#
            </isNotNull>
            <isNotNull property="toolProcuredIDWhere" prepend="and ">
                ToolProcuredID = #toolProcuredIDWhere#
            </isNotNull>
            <isNotNull property="businessFlowLnkIDWhere" prepend="and ">
                BusinessFlowLnkID = #businessFlowLnkIDWhere#
            </isNotNull>
            <isNotNull property="toolDurableWhere" prepend="and ">
                ToolDurable = #toolDurableWhere#
            </isNotNull>
            <isNotNull property="toolSharpennumWhere" prepend="and ">
                ToolSharpennum = #toolSharpennumWhere#
            </isNotNull>
            <isNotNull property="toolSharpenCriterionWhere" prepend="and ">
                ToolSharpenCriterion = #toolSharpenCriterionWhere#
            </isNotNull>
            <isNotNull property="toolLengthWhere" prepend="and ">
                ToolLength = #toolLengthWhere#
            </isNotNull>
            <isNotNull property="toolSharpenLengthWhere" prepend="and ">
                ToolSharpenLength = #toolSharpenLengthWhere#
            </isNotNull>
            <isNotNull property="usageCounterWhere" prepend="and ">
                UsageCounter = #usageCounterWhere#
            </isNotNull>
            <isNotNull property="toolGrindingLengthWhere" prepend="and ">
                ToolGrindingLength = #toolGrindingLengthWhere#
            </isNotNull>
            <isNotNull property="installationStateWhere" prepend="and ">
                InstallationState = #installationStateWhere#
            </isNotNull>
            <isNotNull property="toolStateWhere" prepend="and ">
                ToolState = #toolStateWhere#
            </isNotNull>
            <isNotNull property="replacementFlagWhere" prepend="and ">
                ReplacementFlag = #replacementFlagWhere#
            </isNotNull>
            <isNotNull property="outUserWhere" prepend="and ">
                outUser = #outUserWhere#
            </isNotNull>
            <isNotNull property="inUserWhere" prepend="and ">
                inUser = #inUserWhere#
            </isNotNull>
            <isNotNull property="confirmedUserWhere" prepend="and ">
                ConfirmedUser = #confirmedUserWhere#
            </isNotNull>
            <isNotNull property="stockStateWhere" prepend="and ">
                StockState = #stockStateWhere#
            </isNotNull>
            <isNotNull property="delFlagWhere" prepend="and ">
                DelFlag = #delFlagWhere#
            </isNotNull>
            <isNotNull property="updateTimeWhere" prepend="and ">
                UpdateTime = #updateTimeWhere#
            </isNotNull>
            <isNotNull property="updateUserWhere" prepend="and ">
                UpdateUser = #updateUserWhere#
            </isNotNull>
            <isNotNull property="createTimeWhere" prepend="and ">
                CreateTime = #createTimeWhere#
            </isNotNull>
            <isNotNull property="createUserWhere" prepend="and ">
                CreateUser = #createUserWhere#
            </isNotNull>
            <isNotNull property="versionWhere" prepend="and ">
                Version = #versionWhere#
            </isNotNull>
        </dynamic>
    </update>

    <!-- 插入处理 -->
    <insert id="insert" parameterClass="entityTooltransferhistory">
        <selectKey resultClass="java.lang.String" keyProperty="toolTransferHistoryID">
            SELECT #toolTransferHistoryID# as toolTransferHistoryID FROM DUAL
        </selectKey>
        insert into tooltransferhistory(
        ToolTransferHistoryID
        ,RfidContainerID
        ,KnifeInventoryCode
        ,ToolID
        ,ToolProcuredID
        ,BusinessFlowLnkID
        ,ToolDurable
        ,ToolSharpennum
        ,ToolSharpenCriterion
        ,ToolLength
        ,ToolSharpenLength
        ,UsageCounter
        ,ToolGrindingLength
        ,InstallationState
        ,ToolState
        ,ReplacementFlag
        ,outUser
        ,inUser
        ,ConfirmedUser
        ,StockState
        ,DelFlag
        ,UpdateTime
        ,UpdateUser
        ,CreateTime
        ,CreateUser
        ,Version
        )
        Values (
        <isNotNull property="toolTransferHistoryID">
            #toolTransferHistoryID#
        </isNotNull>
        <isNull property="toolTransferHistoryID">
            null
        </isNull>
        <isNotNull property="rfidContainerID">
            ,#rfidContainerID#
        </isNotNull>
        <isNull property="rfidContainerID">
            ,null
        </isNull>
        <isNotNull property="knifeInventoryCode">
            ,#knifeInventoryCode#
        </isNotNull>
        <isNull property="knifeInventoryCode">
            ,null
        </isNull>
        <isNotNull property="toolID">
            ,#toolID#
        </isNotNull>
        <isNull property="toolID">
            ,null
        </isNull>
        <isNotNull property="toolProcuredID">
            ,#toolProcuredID#
        </isNotNull>
        <isNull property="toolProcuredID">
            ,null
        </isNull>
        <isNotNull property="businessFlowLnkID">
            ,#businessFlowLnkID#
        </isNotNull>
        <isNull property="businessFlowLnkID">
            ,null
        </isNull>
        <isNotNull property="toolDurable">
            ,#toolDurable#
        </isNotNull>
        <isNull property="toolDurable">
            ,null
        </isNull>
        <isNotNull property="toolSharpennum">
            ,#toolSharpennum#
        </isNotNull>
        <isNull property="toolSharpennum">
            ,null
        </isNull>
        <isNotNull property="toolSharpenCriterion">
            ,#toolSharpenCriterion#
        </isNotNull>
        <isNull property="toolSharpenCriterion">
            ,null
        </isNull>
        <isNotNull property="toolLength">
            ,#toolLength#
        </isNotNull>
        <isNull property="toolLength">
            ,null
        </isNull>
        <isNotNull property="toolSharpenLength">
            ,#toolSharpenLength#
        </isNotNull>
        <isNull property="toolSharpenLength">
            ,null
        </isNull>
        <isNotNull property="usageCounter">
            ,#usageCounter#
        </isNotNull>
        <isNull property="usageCounter">
            ,null
        </isNull>
        <isNotNull property="toolGrindingLength">
            ,#toolGrindingLength#
        </isNotNull>
        <isNull property="toolGrindingLength">
            ,null
        </isNull>
        <isNotNull property="installationState">
            ,#installationState#
        </isNotNull>
        <isNull property="installationState">
            ,null
        </isNull>
        <isNotNull property="toolState">
            ,#toolState#
        </isNotNull>
        <isNull property="toolState">
            ,null
        </isNull>
        <isNotNull property="replacementFlag">
            ,#replacementFlag#
        </isNotNull>
        <isNull property="replacementFlag">
            ,null
        </isNull>
        <isNotNull property="outUser">
            ,#outUser#
        </isNotNull>
        <isNull property="outUser">
            ,null
        </isNull>
        <isNotNull property="inUser">
            ,#inUser#
        </isNotNull>
        <isNull property="inUser">
            ,null
        </isNull>
        <isNotNull property="confirmedUser">
            ,#confirmedUser#
        </isNotNull>
        <isNull property="confirmedUser">
            ,null
        </isNull>
        <isNotNull property="stockState">
            ,#stockState#
        </isNotNull>
        <isNull property="stockState">
            ,null
        </isNull>
        <isNotNull property="delFlag">
            ,#delFlag#
        </isNotNull>
        <isNull property="delFlag">
            ,null
        </isNull>
        <isNotNull property="updateTime">
            ,#updateTime#
        </isNotNull>
        <isNull property="updateTime">
            ,null
        </isNull>
        <isNotNull property="updateUser">
            ,#updateUser#
        </isNotNull>
        <isNull property="updateUser">
            ,null
        </isNull>
        <isNotNull property="createTime">
            ,#createTime#
        </isNotNull>
        <isNull property="createTime">
            ,null
        </isNull>
        <isNotNull property="createUser">
            ,#createUser#
        </isNotNull>
        <isNull property="createUser">
            ,null
        </isNull>
        <isNotNull property="version">
            ,#version#
        </isNotNull>
        <isNull property="version">
            ,null
        </isNull>
        )
    </insert>
    <!-- 批量插入处理 -->
    <insert id="insertBatchDefined" parameterClass="java.util.List">
        insert into tooltransferhistory(
        ToolTransferHistoryID
        ,RfidContainerID
        ,KnifeInventoryCode
        ,ToolID
        ,ToolProcuredID
        ,BusinessFlowLnkID
        ,ToolDurable
        ,ToolSharpennum
        ,ToolSharpenCriterion
        ,ToolLength
        ,ToolSharpenLength
        ,UsageCounter
        ,ToolGrindingLength
        ,InstallationState
        ,ToolState
        ,ReplacementFlag
        ,outUser
        ,inUser
        ,ConfirmedUser
        ,StockState
        ,DelFlag
        ,UpdateTime
        ,UpdateUser
        ,CreateTime
        ,CreateUser
        ,Version
        )
        Values
        <iterate conjunction=",">
            (
            #list[].toolTransferHistoryID#
            ,#list[].rfidContainerID#
            ,#list[].knifeInventoryCode#
            ,#list[].toolID#
            ,#list[].toolProcuredID#
            ,#list[].businessFlowLnkID#
            ,#list[].toolDurable#
            ,#list[].toolSharpennum#
            ,#list[].toolSharpenCriterion#
            ,#list[].toolLength#
            ,#list[].toolSharpenLength#
            ,#list[].usageCounter#
            ,#list[].toolGrindingLength#
            ,#list[].installationState#
            ,#list[].toolState#
            ,#list[].replacementFlag#
            ,#list[].outUser#
            ,#list[].inUser#
            ,#list[].confirmedUser#
            ,#list[].stockState#
            ,#list[].delFlag#
            ,#list[].updateTime#
            ,#list[].updateUser#
            ,#list[].createTime#
            ,#list[].createUser#
            ,#list[].version#
            )
        </iterate>
    </insert>
    <!-- 任意条件删除处理 -->
    <delete id="delete" parameterClass="entityTooltransferhistory">
        delete from tooltransferhistory
        <dynamic prepend=" where ">
            <isNotNull property="toolTransferHistoryIDWhere" prepend="and ">
                ToolTransferHistoryID = #toolTransferHistoryIDWhere#
            </isNotNull>
            <isNotNull property="rfidContainerIDWhere" prepend="and ">
                RfidContainerID = #rfidContainerIDWhere#
            </isNotNull>
            <isNotNull property="knifeInventoryCodeWhere" prepend="and ">
                KnifeInventoryCode = #knifeInventoryCodeWhere#
            </isNotNull>
            <isNotNull property="toolIDWhere" prepend="and ">
                ToolID = #toolIDWhere#
            </isNotNull>
            <isNotNull property="toolProcuredIDWhere" prepend="and ">
                ToolProcuredID = #toolProcuredIDWhere#
            </isNotNull>
            <isNotNull property="businessFlowLnkIDWhere" prepend="and ">
                BusinessFlowLnkID = #businessFlowLnkIDWhere#
            </isNotNull>
            <isNotNull property="toolDurableWhere" prepend="and ">
                ToolDurable = #toolDurableWhere#
            </isNotNull>
            <isNotNull property="toolSharpennumWhere" prepend="and ">
                ToolSharpennum = #toolSharpennumWhere#
            </isNotNull>
            <isNotNull property="toolSharpenCriterionWhere" prepend="and ">
                ToolSharpenCriterion = #toolSharpenCriterionWhere#
            </isNotNull>
            <isNotNull property="toolLengthWhere" prepend="and ">
                ToolLength = #toolLengthWhere#
            </isNotNull>
            <isNotNull property="toolSharpenLengthWhere" prepend="and ">
                ToolSharpenLength = #toolSharpenLengthWhere#
            </isNotNull>
            <isNotNull property="usageCounterWhere" prepend="and ">
                UsageCounter = #usageCounterWhere#
            </isNotNull>
            <isNotNull property="toolGrindingLengthWhere" prepend="and ">
                ToolGrindingLength = #toolGrindingLengthWhere#
            </isNotNull>
            <isNotNull property="installationStateWhere" prepend="and ">
                InstallationState = #installationStateWhere#
            </isNotNull>
            <isNotNull property="toolStateWhere" prepend="and ">
                ToolState = #toolStateWhere#
            </isNotNull>
            <isNotNull property="replacementFlagWhere" prepend="and ">
                ReplacementFlag = #replacementFlagWhere#
            </isNotNull>
            <isNotNull property="outUserWhere" prepend="and ">
                outUser = #outUserWhere#
            </isNotNull>
            <isNotNull property="inUserWhere" prepend="and ">
                inUser = #inUserWhere#
            </isNotNull>
            <isNotNull property="confirmedUserWhere" prepend="and ">
                ConfirmedUser = #confirmedUserWhere#
            </isNotNull>
            <isNotNull property="stockStateWhere" prepend="and ">
                StockState = #stockStateWhere#
            </isNotNull>
            <isNotNull property="delFlagWhere" prepend="and ">
                DelFlag = #delFlagWhere#
            </isNotNull>
            <isNotNull property="updateTimeWhere" prepend="and ">
                UpdateTime = #updateTimeWhere#
            </isNotNull>
            <isNotNull property="updateUserWhere" prepend="and ">
                UpdateUser = #updateUserWhere#
            </isNotNull>
            <isNotNull property="createTimeWhere" prepend="and ">
                CreateTime = #createTimeWhere#
            </isNotNull>
            <isNotNull property="createUserWhere" prepend="and ">
                CreateUser = #createUserWhere#
            </isNotNull>
            <isNotNull property="versionWhere" prepend="and ">
                Version = #versionWhere#
            </isNotNull>
        </dynamic>
    </delete>

    <!--根据入库刀具编码更新载体id	-->
    <update id="updateByList" parameterClass="java.util.Map">
        UPDATE tooltransferhistory tt SET
        tt.RfidContainerID = #newRfid#
        ,tt.UpdateTime = NOW()
        ,tt.UpdateUser = #userId#
        ,tt.Version = tt.Version+1
        WHERE tt.KnifeInventoryCode in
        <iterate property="list" open="(" close=")" conjunction=",">
            #list[]#
        </iterate>
        AND tt.DelFlag = '0';
    </update>

    <!--根据RFIDlist删除流转履历的数据	-->
    <update id="updateBatchDeFlagByRfid" parameterClass="java.util.Map">
        UPDATE tooltransferhistory tt SET
        tt.DelFlag = #delFlag#
        ,tt.UpdateTime =#updateTime#
        ,tt.UpdateUser =#userId#
        ,tt.Version = tt.Version + 1
        WHERE
        tt.RfidContainerID IN (
                                    SELECT
                                    rf.RfidContainerID
                                    FROM
                                    rfidcontainer rf
                                    WHERE
                                    rf.RfidCode IN (
                                                    <iterate property="list" open="(" close=")" conjunction=",">
                                                        #list[]#
                                                    </iterate>
                                       )
                        )
    </update>


</sqlMap>

